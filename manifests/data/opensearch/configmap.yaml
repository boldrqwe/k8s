apiVersion: v1
kind: ConfigMap
metadata:
  name: opensearch-config
  namespace: data
  labels:
    app.kubernetes.io/name: opensearch
    app.kubernetes.io/component: search
    app.kubernetes.io/part-of: platform
data:
  opensearch.yml: |
    cluster.name: opensearch-cluster
    network.host: 0.0.0.0
    discovery.seed_hosts:
      - opensearch-0.opensearch-headless.data.svc.cluster.local
      - opensearch-1.opensearch-headless.data.svc.cluster.local
      - opensearch-2.opensearch-headless.data.svc.cluster.local
    cluster.initial_master_nodes:
      - opensearch-0
      - opensearch-1
      - opensearch-2
    plugins.security.ssl.transport.pemcert_filepath: certs/tls.crt
    plugins.security.ssl.transport.pemkey_filepath: certs/tls.key
    plugins.security.ssl.transport.pemtrustedcas_filepath: certs/ca.crt
    plugins.security.ssl.http.enabled: true
    plugins.security.ssl.http.pemcert_filepath: certs/tls.crt
    plugins.security.ssl.http.pemkey_filepath: certs/tls.key
    plugins.security.ssl.http.pemtrustedcas_filepath: certs/ca.crt
    plugins.security.allow_default_init_securityindex: true
    node.store.allow_mmap: false
